// ========================================
// MEDIA QUERIES - АДАПТИВНОСТЬ
// ========================================
// Все медиа-запросы проекта собраны здесь для удобства поддержки
// Организованы по брейкпоинтам и компонентам

// ========================================
// БРЕЙКПОИНТЫ
// ========================================
// 1024px - Планшеты (landscape) и небольшие десктопы
// 768px - Планшеты (portrait) и большие мобильные
// 640px - Мобильные устройства (большие)
// 480px - Мобильные устройства (маленькие)

// ========================================
// 1024px и меньше
// ========================================
@media (max-width: 1024px) {
    // Site Preview
    .grid-cols-1.lg\:grid-cols-4 {
        grid-template-columns: 1fr;
    }

    // Theme Customizer
    .theme-customizer {
        &__content {
            grid-template-columns: 1fr;
        }

        &__color-grid {
            grid-template-columns: 1fr;
        }
    }

    // Create Site
    .create-site {
        &__progress {
            flex-direction: column;
            gap: 1rem;
        }

        &__progress-step {
            &:not(:last-child)::after,
            &:not(:last-child)::before {
                display: none;
            }
        }

        &__form-grid,
        &__media-grid {
            grid-template-columns: 1fr;
        }
    }
}

// ========================================
// 1023px и меньше (для alumni-stats)
// ========================================
@media (max-width: 1023px) {
    // Alumni Stats Widget
    .alumni-stats-output {
        &__subtitle {
            max-width: none;
        }

        .grid > div:first-child .alumni-stats-output__subtitle {
            max-width: none;
        }
    }
}

// ========================================
// 768px и меньше (Планшеты)
// ========================================
@media (max-width: 768px) {
    // Custom Components
    .custom-button {
        padding: $spacing-sm;
        font-size: 0.875rem;
    }

    .gradient-card {
        padding: $spacing-md;
    }

    // Hero Widget
    .hero-widget {
        .hero-slide {
            padding: 30px 16px;

            h1 {
                font-size: 36px;
            }

            h2 {
                font-size: 20px;
            }

            p {
                font-size: 16px;
            }

            button {
                padding: 10px 20px;
                font-size: 14px;
            }
        }

        .swiper-button-next,
        .swiper-button-prev {
            width: 32px;
            height: 32px;

            &::after {
                font-size: 14px;
            }
        }

        .swiper-pagination {
            bottom: 15px;
            padding: 6px 10px;

            .swiper-pagination-bullet {
                width: 6px;
                height: 6px;
                margin: 0 3px;
            }
        }
    }

    // Image Widget
    .image-widget img,
    .logo-widget img {
        max-height: 60px;
    }

    // Menu Widget
    .menu-widget {
        nav {
            gap: 8px;
        }

        a {
            font-size: 14px;
        }

        &.flex-row nav {
            flex-wrap: wrap;
        }
    }

    // Auth Menu Widget
    .auth-menu-widget {
        gap: 6px;

        button {
            font-size: 12px;
            padding: 6px 12px;
        }

        .user-name {
            max-width: 100px;
            font-size: 12px;
        }

        .dropdown-menu-content {
            min-width: 180px;
        }
    }

    // Region Rating Widget
    .region-rating-widget {
        &__header {
            flex-direction: column;
            align-items: flex-start;
        }

        &__title {
            margin-bottom: 1rem;
        }
    }

    // Donation Widget
    .donation-widget {
        &__form {
            padding: 1.5rem;
        }

        &__amount-input {
            font-size: 1.5rem;
        }
    }

    // Site Builder
    .widget-position {
        padding: 0.75rem;
    }

    .widget-position.sidebar-left,
    .widget-position.sidebar-right {
        margin-bottom: 1rem;
    }

    // Menu Component
    .organization-menu.menu-header {
        .menu-list {
            flex-direction: column;
            gap: 0;
        }

        .menu-item {
            width: 100%;

            .menu-link {
                padding: 1rem;
                border-bottom: 1px solid #e5e7eb;
            }

            .submenu {
                position: static;
                opacity: 1;
                visibility: visible;
                transform: none;
                box-shadow: none;
                border: none;
                background: #f9fafb;
                margin: 0;
                border-radius: 0;

                .menu-item .menu-link {
                    padding: 0.75rem 1rem 0.75rem 2rem;
                }
            }
        }
    }

    // Theme Customizer
    .theme-customizer {
        &__title {
            font-size: 1.5rem;
        }

        &__section,
        &__preview {
            padding: 1rem;
        }

        &__actions {
            flex-direction: column;

            .theme-customizer__button {
                width: 100%;
            }
        }
    }

    // Create Site
    .create-site {
        padding: 1rem;

        &__title {
            font-size: 2rem;
        }

        &__progress {
            padding: 1rem;
        }

        &__progress-step {
            flex-direction: column;
            text-align: center;
            gap: 0.5rem;
        }

        &__progress-info {
            text-align: center;
        }

        &__step-content {
            padding: 1rem;
        }

        &__step-title {
            font-size: 1.5rem;
        }

        &__actions {
            flex-direction: column;
            padding: 1rem;

            .create-site__button {
                width: 100%;
                order: 1;
            }

            .create-site__button--danger {
                order: 2;
            }
        }
    }

    // Sites Image Uploader
    .sites-image-uploader {
        &__preview {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    // SEO Settings
    .seo-settings {
        &__title {
            font-size: 1.5rem;
        }

        &__section {
            padding: 1rem;
        }

        &__actions {
            flex-direction: column;

            .seo-settings__button {
                width: 100%;
            }
        }
    }

    // Sites Image Uploader
    .image-uploader {
        &__modal-content {
            max-width: 95vw;
            max-height: 95vh;
        }

        &__crop-container {
            padding: 0.5rem;
        }

        &__crop-image {
            max-height: 300px;
        }

        &__controls {
            padding: 1rem;
        }

        &__modal-actions {
            padding: 1rem;
            flex-direction: column;

            .image-uploader__button {
                width: 100%;
            }
        }
    }

    // Create Organization
    .create-organization {
        &__header {
            flex-direction: column;
            align-items: flex-start;
            gap: 1rem;
        }
    }
}

// ========================================
// 768px и больше (для sidebar)
// ========================================
@media (min-width: 768px) {
    // Sidebar
    .sidebar-container {
        display: block;
    }

    body.sidebar-collapsed .sidebar-main {
        margin-left: 3rem;
    }
}

// ========================================
// 640px и меньше (Мобильные - большие)
// ========================================
@media (max-width: 640px) {
    // Universal Select
    .universal-select {
        &__dropdown {
            max-width: 100%;
        }
    }

    // Logo Uploader
    .logo-uploader {
        &__preview {
            max-width: 100%;
        }
    }

    // Multi Image Uploader
    .multi-image-uploader {
        &__grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    // Date Picker
    .date-picker {
        &__calendar {
            width: 100%;
        }
    }

    // Color Picker
    .color-picker {
        &__swatches {
            grid-template-columns: repeat(4, 1fr);
        }
    }

    // Create Organization
    .create-organization {
        &__error-banner {
            padding: 0.75rem;
            font-size: 0.8rem;
        }

        &__section-header {
            padding: 1rem;
        }

        &__section-content {
            padding: 1rem;
        }

        &__actions {
            flex-direction: column;
            padding: 1rem;

            button {
                width: 100%;
            }
        }
    }

    // Multi Image Uploader
    .multi-image-uploader {
        &__list--grid {
            grid-template-columns: repeat(auto-fill, minmax(8rem, 1fr));
            gap: 0.75rem;
        }

        &__item--list {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;

            .multi-image-uploader__preview {
                width: 100%;
                height: 6rem;
            }
        }

        &__preview-modal-content {
            max-width: 95vw;
            max-height: 95vh;
        }

        &__preview-modal-image {
            padding: 1rem;
            max-height: 60vh;
        }

        &__preview-modal-info {
            padding: 1rem;
        }

        &__preview-modal-details {
            flex-direction: column;
            gap: 0.5rem;
        }
    }

    // Logo Uploader
    .logo-uploader {
        &__modal-content {
            width: 95vw;
            max-height: 95vh;
        }

        &__crop-container {
            padding: 1rem;
        }

        &__crop-image {
            max-height: 15rem;
        }

        &__controls {
            padding: 1rem;
        }

        &__modal-header {
            padding: 1rem;
        }

        &__modal-actions {
            padding: 1rem;
            flex-direction: column;
        }

        &__modal-button {
            justify-content: center;
        }
    }

    // Universal Select
    .universal-select {
        &__dropdown {
            max-height: 50vh;
        }

        &__option {
            padding: 0.75rem;
        }

        &__search {
            padding: 1rem;
        }
    }

    // Date Picker
    .date-picker-field__calendar-wrapper {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);

        &::before {
            content: '';
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.4);
            z-index: -1;
        }
    }

    .react-calendar {
        width: calc(100vw - 32px);
        max-width: 320px;
    }

    // Color Picker
    .color-picker__popover {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        width: calc(100vw - 32px);
        max-width: 300px;

        &::before {
            content: '';
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.4);
            z-index: -1;
        }
    }

    .color-picker__presets {
        grid-template-columns: repeat(4, 1fr);
    }
}

// ========================================
// 480px и меньше (Мобильные - маленькие)
// ========================================
@media (max-width: 480px) {
    // Hero Widget
    .hero-widget {
        .hero-slide {
            padding: 20px 12px;

            h1 {
                font-size: 28px;
            }

            h2 {
                font-size: 18px;
            }

            p {
                font-size: 14px;
            }

            button {
                padding: 8px 16px;
                font-size: 12px;
            }
        }

        .swiper-button-next,
        .swiper-button-prev {
            width: 28px;
            height: 28px;
            display: none;
        }
    }

    // Image Widget
    .image-widget img,
    .logo-widget img {
        max-height: 40px;
    }

    // Menu Widget
    .menu-widget {
        nav {
            gap: 6px;
        }

        a {
            font-size: 12px;
        }
    }

    // Auth Menu Widget
    .auth-menu-widget {
        gap: 4px;

        button {
            font-size: 11px;
            padding: 5px 10px;
        }

        .user-name {
            display: none;
        }
    }

    // Donation Widget
    .donation-widget {
        &__form {
            padding: 1rem;
        }

        &__amount-input {
            font-size: 1.25rem;
        }
    }

    // Donation Widget Sticky
    .donation-widget-sticky {
        left: 10px !important;
        right: 10px !important;
        max-width: none;
    }
}
