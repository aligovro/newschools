# Система сайтов организаций

## Обзор

Система сайтов организаций позволяет каждой организации создавать и управлять собственными веб-сайтами с уникальными доменами. Организации могут выбирать из различных шаблонов, настраивать дизайн и контент, а также управлять страницами через удобный интерфейс.

## Архитектура

### Модели данных

#### OrganizationSite

Основная модель для сайтов организаций.

**Поля:**

- `id` - Уникальный идентификатор
- `organization_id` - Связь с организацией
- `domain_id` - Связь с доменом
- `name` - Название сайта
- `slug` - URL slug для админки
- `description` - Описание сайта
- `template` - Шаблон сайта
- `layout_config` - Конфигурация макета (JSON)
- `theme_config` - Конфигурация темы (JSON)
- `content_blocks` - Блоки контента (JSON)
- `navigation_config` - Конфигурация навигации (JSON)
- `seo_config` - SEO настройки (JSON)
- `custom_settings` - Дополнительные настройки (JSON)
- `logo` - Логотип сайта
- `favicon` - Фавиконка
- `status` - Статус (draft, published, archived)
- `is_public` - Публичный ли сайт
- `is_maintenance_mode` - Режим обслуживания
- `maintenance_message` - Сообщение при обслуживании
- `published_at` - Дата публикации
- `last_updated_at` - Последнее обновление

#### OrganizationSitePage

Модель для страниц сайтов.

**Поля:**

- `id` - Уникальный идентификатор
- `site_id` - Связь с сайтом
- `parent_id` - Родительская страница (для иерархии)
- `title` - Заголовок страницы
- `slug` - URL slug страницы
- `excerpt` - Краткое описание
- `content` - Содержимое страницы
- `template` - Шаблон страницы
- `layout_config` - Конфигурация макета страницы (JSON)
- `content_blocks` - Блоки контента (JSON)
- `seo_config` - SEO настройки (JSON)
- `featured_image` - Изображение страницы
- `status` - Статус (draft, published, archived)
- `is_homepage` - Главная ли страница
- `is_public` - Публичная ли страница
- `show_in_navigation` - Показывать в навигации
- `sort_order` - Порядок сортировки
- `published_at` - Дата публикации
- `last_updated_at` - Последнее обновление

### Шаблоны сайтов

Система поддерживает различные шаблоны сайтов, каждый с уникальным дизайном и функциональностью.

#### Доступные шаблоны:

1. **Стандартный** (`default`)
    - Базовый шаблон с простым дизайном
    - Подходит для большинства организаций
    - Включает: hero, text, image, gallery, slider, testimonials, contact_form, news, projects

2. **Современный** (`modern`)
    - Современный дизайн с градиентами и анимациями
    - Подходит для креативных организаций
    - Включает: все блоки стандартного + stats, features, pricing

3. **Минималистичный** (`minimal`)
    - Чистый и минималистичный дизайн
    - Подходит для профессиональных организаций
    - Включает: hero, text, image, gallery, contact_form

4. **Корпоративный** (`corporate`)
    - Профессиональный корпоративный дизайн
    - Подходит для крупных организаций
    - Включает: все блоки + team, services, about

### Блоки контента

Система поддерживает различные блоки контента, которые можно добавлять на страницы:

#### Доступные блоки:

1. **Hero** - Главный блок с заголовком, описанием и кнопкой
2. **Text** - Текстовый блок с форматированием
3. **Image** - Блок с изображением
4. **Gallery** - Галерея изображений
5. **Slider** - Слайдер изображений или контента
6. **Testimonials** - Блок с отзывами клиентов
7. **Contact Form** - Форма обратной связи
8. **News** - Блок с последними новостями
9. **Projects** - Блок с проектами организации
10. **Stats** - Блок со статистикой
11. **Features** - Блок с особенностями
12. **Pricing** - Блок с ценами
13. **Team** - Блок с командой
14. **Services** - Блок с услугами
15. **About** - Блок "О нас"

## Использование

### Создание сайта

1. Перейдите в админ-панель организации
2. Выберите "Сайты" в меню
3. Нажмите "Создать сайт"
4. Заполните основную информацию:
    - Название сайта
    - Домен
    - Описание
    - Шаблон
    - Логотип и фавиконка
5. Нажмите "Создать сайт"

### Управление сайтом

После создания сайта вы можете:

1. **Редактировать настройки** - изменить название, описание, шаблон
2. **Управлять страницами** - создавать, редактировать, удалять страницы
3. **Настраивать дизайн** - изменять цвета, шрифты, макет
4. **Добавлять контент** - использовать различные блоки контента
5. **Управлять навигацией** - настраивать меню сайта
6. **SEO настройки** - оптимизировать для поисковых систем

### Управление страницами

1. **Создание страницы:**
    - Выберите "Страницы" в меню сайта
    - Нажмите "Добавить страницу"
    - Заполните информацию о странице
    - Выберите шаблон страницы
    - Добавьте контент

2. **Редактирование страницы:**
    - Выберите страницу из списка
    - Нажмите "Редактировать"
    - Внесите изменения
    - Сохраните изменения

3. **Управление иерархией:**
    - Страницы могут иметь родительские страницы
    - Создавайте многоуровневую навигацию
    - Используйте сортировку для управления порядком

### Публикация

1. **Публикация сайта:**
    - Убедитесь, что все настройки корректны
    - Нажмите "Опубликовать"
    - Сайт станет доступен по домену

2. **Публикация страниц:**
    - Отредактируйте страницу
    - Нажмите "Опубликовать"
    - Страница станет доступна на сайте

3. **Режим обслуживания:**
    - Включите режим обслуживания при необходимости
    - Добавьте сообщение для посетителей
    - Отключите после завершения работ

## API

### Получение данных сайта

```http
GET /api/organizations/{organization}
```

Возвращает информацию об организации и её сайтах.

### Получение контента сайта

```http
GET /{domain}
```

Возвращает главную страницу сайта организации.

### Получение страницы сайта

```http
GET /{domain}/{page-slug}
```

Возвращает конкретную страницу сайта.

### Обработка форм

```http
POST /{domain}/contact-form
```

Обрабатывает форму обратной связи.

## Безопасность

### Авторизация

- Только владельцы организации могут управлять её сайтами
- Проверка прав доступа на всех уровнях
- Защита от несанкционированного доступа

### Валидация

- Валидация всех входных данных
- Проверка типов файлов при загрузке
- Ограничения на размер файлов

### Защита от атак

- Защита от XSS атак
- Защита от CSRF атак
- Валидация и санитизация контента

## Производительность

### Кэширование

- Кэширование контента сайтов
- Кэширование навигации
- Кэширование настроек

### Оптимизация

- Ленивая загрузка изображений
- Минификация CSS и JS
- Сжатие контента

### Мониторинг

- Отслеживание производительности
- Логирование ошибок
- Аналитика использования

## Расширение

### Добавление новых шаблонов

1. Добавьте конфигурацию в `config/sites.php`
2. Создайте React компоненты для шаблона
3. Добавьте стили в CSS
4. Обновите документацию

### Добавление новых блоков

1. Добавьте конфигурацию блока в `config/sites.php`
2. Создайте React компонент для блока
3. Добавьте обработку в контроллерах
4. Обновите документацию

### Кастомизация

- Переопределение шаблонов
- Добавление собственных стилей
- Интеграция с внешними сервисами
- Создание собственных блоков

## Поддержка

### Документация

- Полная документация API
- Руководства пользователя
- Примеры использования
- FAQ

### Техническая поддержка

- Обработка ошибок
- Мониторинг системы
- Резервное копирование
- Обновления

### Обучение

- Видеоуроки
- Вебинары
- Документация
- Поддержка сообщества

## Заключение

Система сайтов организаций предоставляет мощный и гибкий инструмент для создания и управления веб-сайтами. С её помощью организации могут легко создавать профессиональные сайты, не обладая техническими знаниями, и управлять ими через удобный интерфейс.

Система масштабируема, безопасна и легко расширяется, что делает её идеальным решением для различных типов организаций.
