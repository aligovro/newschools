# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —ç–∫—à–µ–Ω–∞–º —Ñ–æ—Ä–º

## –û–±–∑–æ—Ä

–≠–∫—à–µ–Ω—ã —Ñ–æ—Ä–º - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª —Ñ–æ—Ä–º—É, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —ç–∫—à–µ–Ω—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

## –¢–∏–ø—ã —ç–∫—à–µ–Ω–æ–≤

### 1. Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ üìß

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–µ email –∞–¥—Ä–µ—Å–∞.

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

- `to` - –º–∞—Å—Å–∏–≤ email –∞–¥—Ä–µ—Å–æ–≤ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
- `subject` - —Ç–µ–º–∞ –ø–∏—Å—å–º–∞
- `template` - —à–∞–±–ª–æ–Ω –ø–∏—Å—å–º–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `emails.form-submission`)

**–ü—Ä–∏–º–µ—Ä:**

```json
{
    "type": "email",
    "config": {
        "to": ["admin@example.com", "manager@example.com"],
        "subject": "–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞",
        "template": "emails.form-submission"
    }
}
```

### 2. Webhook üîó

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –Ω–∞ –≤–Ω–µ—à–Ω–∏–π URL.

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

- `url` - URL –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- `method` - HTTP –º–µ—Ç–æ–¥ (POST, PUT, PATCH)
- `headers` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- `timeout` - —Ç–∞–π–º–∞—É—Ç –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
- `additional_fields` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏

**–ü—Ä–∏–º–µ—Ä:**

```json
{
    "type": "webhook",
    "config": {
        "url": "https://api.example.com/webhook",
        "method": "POST",
        "headers": {
            "Authorization": "Bearer token123"
        },
        "timeout": 30,
        "additional_fields": {
            "source": "website_form"
        }
    }
}
```

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö üíæ

–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

- `table` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- `mapping` - –º–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã –Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ —Ç–∞–±–ª–∏—Ü—ã
- `additional_fields` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä:**

```json
{
    "type": "database",
    "config": {
        "table": "form_submissions_data",
        "mapping": {
            "name": "full_name",
            "email": "email_address",
            "message": "user_message"
        },
        "additional_fields": {
            "processed_at": "2024-01-01 12:00:00"
        }
    }
}
```

### 4. Telegram üì±

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram —á–∞—Ç.

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

- `bot_token` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- `chat_id` - ID —á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
- `message` - —à–∞–±–ª–æ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è
- `parse_mode` - —Ä–µ–∂–∏–º –ø–∞—Ä—Å–∏–Ω–≥–∞ (HTML, Markdown)

**–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏:**

- `{form_name}` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã
- `{submission_id}` - ID –æ—Ç–ø—Ä–∞–≤–∫–∏
- `{timestamp}` - –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏
- `{ip_address}` - IP –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è

**–ü—Ä–∏–º–µ—Ä:**

```json
{
    "type": "telegram",
    "config": {
        "bot_token": "123456789:ABCdefGHIjklMNOpqrsTUVwxyz",
        "chat_id": "-1001234567890",
        "message": "üÜï –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞: {form_name}\nüìÖ –í—Ä–µ–º—è: {timestamp}",
        "parse_mode": "HTML"
    }
}
```

### 5. –ö–∞—Å—Ç–æ–º–Ω—ã–π —ç–∫—à–µ–Ω ‚öôÔ∏è

–í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π PHP –∫–æ–¥.

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

- `class` - –ø–æ–ª–Ω–æ–µ –∏–º—è PHP –∫–ª–∞—Å—Å–∞
- `method` - –º–µ—Ç–æ–¥ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `execute`)
- `parameters` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–ü—Ä–∏–º–µ—Ä:**

```json
{
    "type": "custom",
    "config": {
        "class": "App\\Services\\CustomFormAction",
        "method": "execute",
        "parameters": {
            "api_key": "secret123"
        }
    }
}
```

## –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —ç–∫—à–µ–Ω–∞

1. –°–æ–∑–¥–∞–π—Ç–µ PHP –∫–ª–∞—Å—Å –≤ `app/Services/FormActions/`:

```php
<?php

namespace App\Services\FormActions;

use App\Models\FormSubmission;

class CustomFormAction
{
    public function execute(FormSubmission $submission, array $config): bool
    {
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
        $data = $submission->data;

        // –ù–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ CRM
        $this->sendToCRM($data);

        return true;
    }

    private function sendToCRM(array $data): void
    {
        // –õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ CRM
    }
}
```

2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —ç–∫—à–µ–Ω –≤ —Ñ–æ—Ä–º–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç–∫—à–µ–Ω–æ–≤

–≠–∫—à–µ–Ω—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö `sort_order`. –ï—Å–ª–∏ –æ–¥–∏–Ω —ç–∫—à–µ–Ω –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π, –æ—Å—Ç–∞–ª—å–Ω—ã–µ —ç–∫—à–µ–Ω—ã –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã.

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —ç–∫—à–µ–Ω—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ Laravel –ª–æ–≥ —Å —É—Ä–æ–≤–Ω–µ–º `info` –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π –∏ `error` –¥–ª—è –æ—à–∏–±–æ–∫.

## –°—Ç–∞—Ç—É—Å—ã –æ—Ç–ø—Ä–∞–≤–æ–∫

- `pending` - –æ–∂–∏–¥–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `processed` - —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞
- `failed` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í –ª–æ–≥–∞—Ö Laravel –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:

- –£—Å–ø–µ—à–Ω—ã–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç–∫—à–µ–Ω–æ–≤
- –û—à–∏–±–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –î–µ—Ç–∞–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —ç–∫—à–µ–Ω–æ–≤
- Webhook URL –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
- Telegram —Ç–æ–∫–µ–Ω—ã –∏ chat ID –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–ª–∞—Å—Å—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –≠–∫—à–µ–Ω—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥–∏ Laravel
- Webhook —Ç–∞–π–º–∞—É—Ç—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º

```json
{
    "actions": [
        {
            "type": "email",
            "config": {
                "to": ["admin@example.com"],
                "subject": "–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Å–∞–π—Ç–∞"
            }
        }
    ]
}
```

### –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å webhook –∏ Telegram

```json
{
    "actions": [
        {
            "type": "webhook",
            "config": {
                "url": "https://crm.example.com/api/leads",
                "method": "POST"
            }
        },
        {
            "type": "telegram",
            "config": {
                "bot_token": "BOT_TOKEN",
                "chat_id": "CHAT_ID",
                "message": "üÜï –ù–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: {form_name}"
            }
        }
    ]
}
```

### –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î

```json
{
    "actions": [
        {
            "type": "database",
            "config": {
                "table": "orders",
                "mapping": {
                    "customer_name": "name",
                    "customer_email": "email",
                    "product": "product_name",
                    "quantity": "qty"
                }
            }
        }
    ]
}
```
